<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
    <title>BOOKO</title>
	<link rel="icon" type="image/png" href="{{ url_for('static',filename='img/logo.png') }}"/>
    <link rel="canonical" href="https://www.wrappixel.com/templates/ample-admin-lite/" />
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <style>
        .select-options{
            padding: 5px;
        }
    </style>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.min.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <!-- ============================================================== -->
    <!-- Preloader - style you can find in spinners.css -->
    <!-- ============================================================== -->
    <div class="preloader">
        <div class="lds-ripple">
            <div class="lds-pos"></div>
            <div class="lds-pos"></div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- Main wrapper - style you can find in pages.scss -->
    <!-- ============================================================== -->
    <div id="main-wrapper" data-layout="vertical" data-navbarbg="skin5" data-sidebartype="full"
        data-sidebar-position="absolute" data-header-position="absolute" data-boxed-layout="full">
        <!-- ============================================================== -->
        <!-- Topbar header - style you can find in pages.scss -->
        <!-- ============================================================== -->
        <header class="topbar" data-navbarbg="skin5">
            <nav class="navbar top-navbar navbar-expand-md navbar-dark">
                <div class="navbar-header" data-logobg="skin6">
                    <!-- ============================================================== -->
                    <!-- Logo -->
                    <!-- ============================================================== -->
                    <a class="navbar-brand" href="/dashboard">
                        <!-- Logo icon -->
                        <b class="logo-icon">
                            <!-- Dark Logo icon -->
                            <img src="{{ url_for('static', filename='img/logo.png') }}" style="widows: 40px;height: 30px;" alt="homepage" />
                        </b>
                        <!--End Logo icon -->
                        <!-- Logo text -->
                        <span class="logo-text">
                            <!-- dark Logo text -->
                            <h3 style="color: black; padding-top: 15px; padding-bottom: 12px; padding-left: 20px; font-family: Calibri, sans-serif;font-weight: bold;">BOOKO</h3>
                        </span>
                    </a>
                    <!-- ============================================================== -->
                    <!-- End Logo -->
                    <!-- ============================================================== -->
                    <!-- ============================================================== -->
                    <!-- toggle and nav items -->
                    <!-- ============================================================== -->
                    <a class="nav-toggler waves-effect waves-light text-dark d-block d-md-none"
                        href="javascript:void(0)"><i class="ti-menu ti-close"></i></a>
                </div>
                <!-- ============================================================== -->
                <!-- End Logo -->
                <!-- ============================================================== -->
                <div class="navbar-collapse collapse" id="navbarSupportedContent" data-navbarbg="skin5">
                    <ul class="navbar-nav d-none d-md-block d-lg-none">
                        <li class="nav-item">
                            <a class="nav-toggler nav-link waves-effect waves-light text-white"
                                href="javascript:void(0)"><i class="ti-menu ti-close"></i></a>
                        </li>
                    </ul>
                    <!-- ============================================================== -->
                    <!-- Right side toggle and nav items -->
                    <!-- ============================================================== -->
                    <ul class="navbar-nav ms-auto d-flex align-items-center">
                        <!-- ============================================================== -->
                        <!-- User profile avatar -->
                        <!-- ============================================================== -->
                        <li>
                            <a class="profile-pic" href="#">
                                <img src="{{ url_for('static', filename='plugins/images/users/varun.jpg') }}" alt="user-img" width="36"
                                    class="img-circle"><span id="profile-name" class="text-white font-medium">Steave</span></a>
                        </li>
                        <!-- ============================================================== -->
                        <!-- User profile avatar -->
                        <!-- ============================================================== -->
                    </ul>
                </div>
            </nav>
        </header>
        <!-- ============================================================== -->
        <!-- End Topbar header -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <aside class="left-sidebar" data-sidebarbg="skin6">
            <!-- Sidebar scroll-->
            <div class="scroll-sidebar">
                <!-- Sidebar navigation-->
                <nav class="sidebar-nav">
                    <ul id="sidebarnav">
                        <!-- Home -->
                        <li class="sidebar-item pt-2">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="/dashboard"
                                aria-expanded="false">
                                <i class="fa fa-home" aria-hidden="true"></i>
                                <span class="hide-menu">Home</span>
                            </a>
                        </li>
                        <!-- User Profile-->
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="/profile"
                                aria-expanded="false">
                                <i class="fa fa-user" aria-hidden="true"></i>
                                <span class="hide-menu">My Profile</span>
                            </a>
                        </li>
                        <!-- Posts books -->
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="/sell-books"
                                aria-expanded="false">
                                <i class="fa fa-plus-square-o" aria-hidden="true"></i>
                                <span class="hide-menu">Sell Books</span>
                            </a>
                        </li>
                        <!-- View your books -->
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="/my-books"
                                aria-expanded="false">
                                <i class="fa fa-book" aria-hidden="true"></i>
                                <span class="hide-menu">My Books</span>
                            </a>
                        </li>
                        <!-- Categories -->
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="/categories"
                                aria-expanded="false">
                                <i class="fa fa-sitemap" aria-hidden="true"></i>
                                <span class="hide-menu">Categories</span>
                            </a>
                        </li>
                        <!-- Notifications -->
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="/notifications"
                                aria-expanded="false">
                                <i class="fa fa-bullhorn" aria-hidden="true"></i>
                                <span class="hide-menu">Notifications</span>
                            </a>
                        </li>
                        <!-- Logout -->
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" 
                                href = "/login"
                                aria-expanded="false">
                                <i class="fa fa-power-off" aria-hidden="true"></i>
                                <span class="hide-menu">Logout</span>
                            </a>
                        </li>
                    </ul>

                </nav>
                <!-- End Sidebar navigation -->
            </div>
            <!-- End Sidebar scroll-->
        </aside>
        <!-- ============================================================== -->
        <!-- End Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Page wrapper  -->
        <!-- ============================================================== -->
        <div class="page-wrapper">
            <!-- ============================================================== -->
            <!-- Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <div class="page-breadcrumb bg-white">
                <div class="row align-items-center">
                    <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
                        <h4 class="page-title">My Profile</h4>
                    </div>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- ============================================================== -->
            <!-- End Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
            <div class="container-fluid">
                <!-- ============================================================== -->
                <!-- Start Page Content -->
                <!-- ============================================================== -->
                <!-- Row -->
                <div class="row">
                    <!-- Column -->
                    <div class="col-lg-4 col-xlg-3 col-md-12">
                        <div class="white-box">
                            <div class="user-bg"> <img width="100%" alt="user" src="{{ url_for('static', filename='plugins/images/large/img1.jpg') }}">
                                <div class="overlay-box">
                                    <div class="user-content">
                                        <a href="javascript:void(0)"><img src="{{ url_for('static', filename='plugins/images/users/genu.jpg') }}"
                                                class="thumb-lg img-circle" alt="img"></a>
                                        <h4 id="username" class="text-white mt-2"></h4>
                                        <h5 id="email-id" class="text-white mt-2"></h5>
                                    </div>
                                </div>
                            </div>
                            <div class="user-btm-box mt-5 d-md-flex">
                                <div class="col-md-12 text-center">
                                    <h3 id="phoneNo">Ph : XXX XXX XXX</h3>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Column -->
                    <!-- Column -->
                    <div class="col-lg-8 col-xlg-9 col-md-12">
                        <div class="card">
                            <div class="card-body">
                                <form onsubmit="event.preventDefault();" class="form-horizontal form-material">
                                    <div class="form-group mb-4">
                                        <label class="col-md-12 p-0" style="font-weight: bold;">First Name</label>
                                        <div class="col-md-12 border-bottom p-0">
                                            <input type="text" id="firstname"
                                                class="form-control p-0 border-0"> </div>
                                    </div>
                                    <div class="form-group mb-4">
                                        <label class="col-md-12 p-0" style="font-weight: bold;">Last Name</label>
                                        <div class="col-md-12 border-bottom p-0">
                                            <input type="text" id="lastname"
                                                class="form-control p-0 border-0"> </div>
                                    </div>
                                    <div class="form-group mb-4">
                                        <label for="example-email" class="col-md-12 p-0" style="font-weight: bold;">Email</label>
                                        <div class="col-md-12 border-bottom p-0">
                                            <input type="email"
                                                class="form-control p-0 border-0" name="example-email"
                                                id="email">
                                        </div>
                                    </div>
                                    <div class="form-group mb-4">
                                        <label class="col-md-12 p-0" style="font-weight: bold;">Phone No</label>
                                        <div class="col-md-12 border-bottom p-0">
                                            <input type="text" id="phoneno"
                                                class="form-control p-0 border-0">
                                        </div>
                                    </div>
                                    <div class="form-group mb-4">
                                        <label class="col-sm-12" style="font-weight: bold;">Select Country</label>
                                        <div class="col-sm-12 border-bottom">
                                            <select id="country" class="form-select shadow-none p-0 border-0 form-control-line">
                                                <option class="select-options" value="London">London</option>
                                                <option class="select-options" value="India">India</option>
                                                <option class="select-options" value="Usa">Usa</option>
                                                <option class="select-options" value="Canada">Canada</option>
                                                <option class="select-options" value="Thailand">Thailand</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group mb-4">
                                        <label class="col-sm-12" style="font-weight: bold;">Choose Intersts</label>
                                        <div class="col-sm-12 border-bottom">
                                            <select id="interests" class="form-select shadow-none p-0 border-0 form-control-line">
                                                <option class='select-options' value="ADVENTURE">Adventure</option>
                                                <option class='select-options'value="CLASSICS">Classics</option>
                                                <option class='select-options' value="COMICS">Comics</option>
                                                <option class='select-options' value="DETECTIVE">Detective</option>
                                                <option class='select-options' value="FANTASY">Fantasy</option>
                                                <option class='select-options' value="HORROR">Horror</option>
                                                <option class='select-options' value="ROMANCE">Romance</option>
                                                <option class='select-options' value="SCI-FI">Sci-fi</option>
                                                <option class='select-options' value="THRILLERS">Thrillers</option>
                                                <option class='select-options' value="AUTOBIOGRAPHIES">Autobiographies</option>
                                                <option class='select-options' value="HISTORY">History</option>
                                                <option class='select-options' value="SELF-HELP">Self-help</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group mb-4">
                                        <div class="col-sm-12">
                                            <button class="btn btn-success" onclick="update_profile()" style="font-weight: bold;">Update Profile</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- Column -->
                </div>
                <!-- Row -->
                <!-- ============================================================== -->
                <!-- End PAge Content -->
                <!-- ============================================================== -->
                <!-- ============================================================== -->
                <!-- Right sidebar -->
                <!-- ============================================================== -->
                <!-- .right-sidebar -->
                <!-- ============================================================== -->
                <!-- End Right sidebar -->
                <!-- ============================================================== -->
            </div>
            <!-- ============================================================== -->
            <!-- End Container fluid  -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- footer -->
            <!-- ============================================================== -->
            
            <!-- ============================================================== -->
            <!-- End footer -->
            <!-- ============================================================== -->
        </div>
        <!-- ============================================================== -->
        <!-- End Page wrapper  -->
        <!-- ============================================================== -->
    </div>
    <!-- ============================================================== -->
    <!-- End Wrapper -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- All Jquery -->
    <!-- ============================================================== -->
    <script src="{{ url_for('static', filename='plugins/bower_components/jquery/dist/jquery.min.js') }}"></script>
    <!-- Bootstrap tether Core JavaScript -->
    <script src="{{ url_for('static', filename='bootstrap/dist/js/bootstrap.bundle.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/app-style-switcher.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/bower_components/jquery-sparkline/jquery.sparkline.min.js') }}"></script>
    <!--Wave Effects -->
    <script src="{{ url_for('static', filename='js/waves.js') }}"></script>
    <!--Menu sidebar -->
    <script src="{{ url_for('static', filename='js/sidebarmenu.js') }}"></script>
    <!--Custom JavaScript -->
    <script src="{{ url_for('static', filename='js/custom.js') }}"></script>
    <!--This page JavaScript -->
    <!--chartis chart-->
    <script src="{{ url_for('static', filename='plugins/bower_components/chartist/dist/chartist.min.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/bower_components/chartist-plugin-tooltips/dist/chartist-plugin-tooltip.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/pages/dashboards/dashboard1.js') }}"></script>
    <script>
        userData = JSON.parse(localStorage.userData)
        document.getElementById("profile-name").innerHTML = userData.userName;
        document.getElementById("username").innerHTML = userData.userName;
        document.getElementById("email-id").innerHTML = userData.emailId;
        
        //fill bio
        userData = JSON.parse(localStorage.userData);
        if(userData.firstName!="")
            $("#firstname").val(userData.firstName);
        else
            $("#firstname").attr("placeholder", "Enter your first name");

        if(userData.lastName!="")
            $("#lastname").val(userData.lastName);
        else
            $("#lastname").attr("placeholder", "Enter your last name");

        if(userData.emailId!="")
            $("#email").val(userData.emailId);

        if(userData.phoneNo!=""){
            $("#phoneno").val(userData.phoneNo);
            $("#phoneNo").html("Ph : "+userData.phoneNo);
        }
        else
            $("#phoneno").attr("placeholder", "Enter your phone number");
        
        if(userData.country!="")
            $("#country").val(userData.country)

        if(userData.interests!="")
            $("#interests").val(userData.interests)
        
        // update profile
        update_profile = () =>
        { 
            var profileData = {
                userName: JSON.parse(localStorage.userData).userName,
                firstName: $("#firstname").val(),
                lastName: $("#lastname").val(),
                emailId: $("#email").val(),
                phoneNo: $("#phoneno").val(),
                country: $("#country").val(),
                interests: $("#interests").val()
            }
            $("#email-id").html(profileData.email);
            $("#phoneNo").html("Ph : "+profileData.phoneNo);
            userData = JSON.parse(localStorage.userData)
            userData.userName = JSON.parse(localStorage.userData).userName;
            userData.firstName = profileData.firstName;
            userData.lastName = profileData.lastName;
            userData.emailId = profileData.emailId;
            userData.phoneNo = profileData.phoneNo;
            userData.country = profileData.country;
            userData.interests = profileData.interests;
            localStorage.userData = JSON.stringify(userData);
            
            var settings = {
				"async": true,
				"crossDomain": true,
				"url": "http://127.0.0.1:5000/profile",
				"method": "POST",
				"data": JSON.stringify(profileData)
			}

			$.ajax(settings).done(function (response) {
				if(response.success == true){
					console.log(response);
                    swal("Done !", response.message, "success");
				}else{
                    console.log(response);
					swal("Failed :(", response.message, "error");
                }
			});
        }
    </script>
</body>

</html>